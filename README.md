# üìÅ File API (Express + TypeScript + MySQL)

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π REST API –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏, –ø–æ–ª—É—á–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ —Å —Å–∏—Å—Ç–µ–º–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ JWT –∏ –º–Ω–æ–≥–æ—Å–µ—Å—Å–∏–π–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π refresh-—Ç–æ–∫–µ–Ω–æ–≤.

## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Node.js + Express
- TypeScript
- Sequelize ORM (MySQL)
- JWT (access / refresh —Ç–æ–∫–µ–Ω—ã)
- Multer (–¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤)
- Joi (–≤–∞–ª–∏–¥–∞—Ü–∏—è)
- CORS

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä—É–π –ø—Ä–æ–µ–∫—Ç –∏ —É—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
git clone https://github.com/teomayy/test-file-api
cd test-file-api
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π `.env` —Ñ–∞–π–ª

```env
PORT=4000
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=yourpassword
DB_NAME=file_api
JWT_SECRET=your_jwt_secret
JWT_REFRESH_SECRET=your_refresh_secret
```

### 3. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
npm run dev
```

> ‚úÖ Sequelize –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ë–î.

---

## üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

- `POST /auth/signup` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /auth/signin` ‚Äî –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- `POST /auth/signin/new_token` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ accessToken –ø–æ refreshToken
- `POST /auth/logout` ‚Äî –≤—ã—Ö–æ–¥ –∏–∑ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏
- `GET /auth/info` ‚Äî –ø–æ–ª—É—á–∏—Ç—å ID —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–í—Å–µ –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫:

```
Authorization: Bearer <accessToken>
```

---

## üìÅ –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏

–í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã `/file/*` —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

- `POST /file/upload` ‚Äî –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª (multipart/form-data, –ø–æ–ª–µ `file`)
- `GET /file/list?page=1&list_size=10` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- `GET /file/:id` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∞–π–ª–µ
- `GET /file/download/:id` ‚Äî —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª
- `DELETE /file/delete/:id` ‚Äî —É–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª
- `PUT /file/update/:id` ‚Äî –∑–∞–º–µ–Ω–∏—Ç—å —Ñ–∞–π–ª

---

## ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- Access —Ç–æ–∫–µ–Ω –∂–∏–≤—ë—Ç 10 –º–∏–Ω—É—Ç
- Refresh —Ç–æ–∫–µ–Ω –∂–∏–≤—ë—Ç 7 –¥–Ω–µ–π –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–≥–æ—Å–µ—Å—Å–∏–π–Ω–æ—Å—Ç—å (–ø–æ `deviceId`)
- –ü—Ä–∏ –≤—ã—Ö–æ–¥–µ —É–¥–∞–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Å–µ—Å—Å–∏—è
- –°—Ç–∞—Ä—ã–µ —Ç–æ–∫–µ–Ω—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏ —Ç–æ–∫–µ–Ω–∞ —á–µ—Ä–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫—É —Å–µ—Å—Å–∏–∏ –≤ –ë–î
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö `req.body` —á–µ—Ä–µ–∑ Joi

---

## üì• Postman Collection

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `FileAPI_Postman_Collection.json` –≤ Postman –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤.

---

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä –ò–±—Ä–∞–≥–∏–º

–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –≤ —Ä–∞–º–∫–∞—Ö —Ç–µ—Å—Ç–æ–≥–æ–≥–æ –∑–∞–¥–∞–Ω–∏–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã Express + TS.
